# 迁移指南生成器

创建更新的迁移指南

## 说明

请遵循以下系统化方法创建迁移指南：**$ARGUMENTS**

1. **迁移范围分析**
   - 确定要迁移的内容（框架、库、架构等）
   - 确定源版本和目标版本或技术
   - 评估迁移的规模和复杂性
   - 确定受影响的系统和组件

2. **影响评估**
   - 分析版本之间的重大变更
   - 确定已弃用的功能和 API
   - 审核新增功能和特性
   - 评估兼容性要求和限制
   - 评估性能和安全影响

3. **先决条件和要求**
   - 记录目标版本的系统要求
   - 列出所需工具和依赖项
   - 指定最低版本和兼容性要求
   - 确定必要的技能和团队准备
   - 概述基础设施和环境需求

4. **迁移前准备**
   - 制定全面的备份策略
   - 设置开发和测试环境
   - 记录当前系统状态和配置
   - 建立回滚程序和应​​急计划
   - 创建迁移时间表和里程碑

5. **分步迁移流程**

  **框架升级示例：**
  ```markdown
  ## 步骤 1：环境设置
  1. 更新开发环境
  2. 安装新框架版本
  3. 更新构建工具和依赖项
  4. 配置 IDE 和工具

  ## 步骤 2：依赖项更新
  1. 更新 package.json/requirements.txt
  2. 解决依赖冲突
  3. 更新相关库
  4. 测试兼容性

  ## 步骤 3：代码迁移
  1. 更新 import 语句
  2. 替换已弃用的 API
  3. 更新配置文件
  4. 修改构建脚本
  ```

6. **重大变更文档**
   - 列出所有重大变更并附上示例
   - 提供变更前后代码对比
   - 解释变更背后的原因
   - 提供已移除功能的替代方案

   **重大变更示例：**
   ```markdown
   ### 已移除： `oldMethod()`
   **修改前：**
   ```javascript
   const result = library.oldMethod(param1, param2);
   ```

   **修改后：**
   ```javascript
   const result = library.newMethod({
    param1: param1,
    param2: param2
   });
   ```

   **改进原因：** 提升类型安全性和可扩展性
   ```

7. **配置变更**
   - 记录配置文件更新
   - 解释新的配置选项
   - 提供配置迁移脚本
   - 展示特定环境的配置

8. **数据库迁移（如适用）**
   - 创建数据库架构迁移脚本
   - 记录数据转换要求
   - 提供备份和恢复程序
   - 使用示例数据测试迁移
   - 规划零停机迁移

9. **测试策略**
   - 更新现有测试以适应新的 API
   - 创建特定于迁移的测试用例
   - 实施集成和端到端测试
   - 设置性能和负载测试
   - 记录测试场景和预期结果

10. **性能考量**
    - 记录性能变更和优化
    - 提供基准测试指南
    - 识别潜在的性能回归
    - 建议监控和警报更新
    - 包含内存和资源使用情况的变更

11. **安全更新**
    - 记录安全改进和变更
    - 更新身份验证和授权代码
    - 审查和更新安全配置
    - 更新依赖项安全扫描
    - 记录新的安全最佳实践

12. **部署策略**
    - 规划分阶段部署方法
    - 创建部署脚本和自动化机制
    - 设置监控和健康检查
    - 规划蓝绿部署或金丝雀部署
    - 记录回滚流程

13. **常见问题及故障排除**

  ```markdown
  ## 常见迁移问题

  ### 问题：导入/模块解析错误
  **症状：**无法解析模块“old-package”
  **解决方案：**
  1. 将导入语句更新为新的包名称
  2. 检查 package.json 中的依赖项是否正确
  3. 清除 node_modules 并重新安装

  ### 问题：未找到 API 方法
  **症状：**TypeError：oldMethod 不是函数
  **解决方案：**按照步骤 3 中的说明替换为新的 API
  ```

14. **团队沟通与培训**
    - 创建团队培训材料
    - 安排知识共享会议
    - 记录新的开发工作流程
    - 更新编码标准和指南
    - 创建快速参考指南

15. **工具和自动化**
    - 提供迁移脚本和实用程序
    - 创建代码转换工具 (codemods)
    - 设置自动兼容性检查
    - 实施 CI/CD 流水线更新
    - 创建验证和确认工具

16. **时间线和里程碑**

  ```markdown
  ## 迁移时间线

  ### 第 1 阶段：准备（第 1-2 周）
  - [ ] 环境设置
  - [ ] 团队培训
  - [ ] 开发环境迁移

  ### 第 2 阶段：开发（第 3-6 周）
  - [ ] 核心应用程序迁移
  - [ ] 测试和验证
  - [ ] 性能优化

  ### 第 3 阶段：部署（第 7-8 周）
  - [ ] 阶段部署
  - [ ] 生产部署
  - [ ] 监控和支持
  ```

17. **风险缓解**
    - 识别潜在的迁移风险
    - 针对每种风险制定应急计划
    - 记录升级程序
    - 规划延长时间线的场景
    - 准备与利益相关者的沟通

18. **迁移后任务**
    - 清理弃用的代码和配置
    - 更新文档和 README 文件
    - 审查和优化新实施
    - 进行迁移后回顾
    - 规划未来的维护和更新

19. **验证与测试**
    - 制定全面的测试计划
    - 记录验收标准
    - 设置自动化回归测试
    - 规划用户验收测试
    - 实施监控和警报

20. **文档更新**
    - 更新 API 文档
    - 修订开发指南
    - 更新部署文档
    - 创建故障排除指南
    - 更新团队入职材料

**迁移类型和具体注意事项：**

**框架迁移（React 17 → 18）：**
- 更新 React 和 ReactDOM 导入
- 替换弃用的生命周期方法
- 更新测试库方法
- 处理并发功能和 Suspense

**数据库迁移（MySQL → PostgreSQL）：**
- 转换 SQL 语法差异
- 更新数据类型和约束
- 将存储过程迁移为函数
- 更新 ORM 配置

**云迁移（本地 → AWS）：**
- 容器化应用
- 更新 CI/CD 流水线
- 配置云服务
- 实现基础设施即代码

**架构迁移（单体架构 → 微服务架构）：**
- 识别服务边界
- 实现服务间通信
- 设置服务发现
- 规划数据一致性策略

请记住：
- 首先在非生产环境中进行全面测试
- 定期沟通进度和问题
- 记录未来迁移的经验教训
- 根据实际经验持续更新迁移指南